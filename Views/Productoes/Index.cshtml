@model IEnumerable<FacturaDouglas.Models.Producto>
@{
    ViewBag.Title = "Productos";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="page-header">
    <h2>Productos</h2>
    <div class="toolbar space-between">
    <div>
            @Html.ActionLink("Nuevo producto", "Create", null, new { @class = "btn btn-primary" })
    </div>
    <div>
            @using (Html.BeginForm("Index", "Productoes", FormMethod.Get, new { @class = "search-form" }))
            {
                <input type="search" name="q" placeholder="Buscar productos..." class="form-control" style="display:inline-block;width:220px;" />
                <button class="btn btn-outline-dark btn-sm" type="submit">Buscar</button>
            }
    </div>
    </div>
</div>
<table class="table table-striped table-hover">
    <thead>
    <tr>
            <th>ID</th>
            <th>Descripción</th>
            <th>Precio</th>
            <th>IVA (%)</th>
            <th>Categoría</th>
            <th>Cantidad</th>
            <th>Estado</th>
            <th>Creado</th>
            <th>Acciones</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var item in Model) {
    var rowClass = "";
    if (item.estado != null) {
            if (item.estado.ToString().ToLower().Contains("activo")) { rowClass = "row-highlight"; }
            else if (item.estado.ToString().ToLower().Contains("baja") || item.estado.ToString().ToLower().Contains("inactivo")) { rowClass = "row-muted"; }
    }
    <tr class="@rowClass">
            <td>@Html.DisplayFor(modelItem => item.id_producto)</td>
            <td>@Html.DisplayFor(modelItem => item.descripcion)</td>
            <td>@String.Format("{0:C}", item.precio_base)</td>
            <td>@Html.DisplayFor(modelItem => item.iva_porcentaje)</td>
            <td>@Html.DisplayFor(modelItem => item.categoria)</td>
            <td>@Html.DisplayFor(modelItem => item.cantidad)</td>
            <td>@Html.DisplayFor(modelItem => item.estado)</td>
            <td>@Html.DisplayFor(modelItem => item.fecha_creacion)</td>
            <td>
                @Html.ActionLink("Ver", "Details", new { id = item.id_producto }, new { @class = "btn btn-sm btn-outline-dark" })
                @Html.Raw("&nbsp;")
                @Html.ActionLink("Editar", "Edit", new { id = item.id_producto }, new { @class = "btn btn-sm btn-primary" })
                @Html.Raw("&nbsp;")
                @Html.ActionLink("Eliminar", "Delete", new { id = item.id_producto }, new { @class = "btn btn-sm btn-outline-dark" })
                @Html.Raw("&nbsp;")
                @Html.ActionLink("Añadir a factura", "Create", "DatosFacturas", new { productId = item.id_producto }, new { @class = "btn btn-sm btn-primary" })
            </td>
    </tr>
    }
    </tbody>
</table>
